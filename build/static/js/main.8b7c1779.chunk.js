(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(34)},25:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(17),c=a.n(o),s=a(9),l=a(4),i=a(5),u=a(7),d=a(6),h=a(8),p=a(13),m="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:f},y=function(e){return fetch("".concat(m,"/books/").concat(e),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.book})},v=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},k=function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(p.a)({},b,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=(a(25),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){e.preventDefault(),"shelf"===a.props.parent?a.props.update(a.props.id,e.target.value):a.props.add(a.props.id,e.target.value)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(this.props.image,")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{value:this.props.shelf,onChange:this.handleChange},r.a.createElement("option",{value:"move",selected:!0,disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},this.props.title),r.a.createElement("div",{className:"book-authors"},this.props.authors))}}]),t}(n.Component)),g=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={query:"",results:[]},a.handleSearch=function(e){k(e).then(function(e){e.error?a.setState({results:[]}):a.setState({results:e})})},a.updateQuery=function(e){e?(a.setState({query:e.trim().toLowerCase()}),a.handleSearch(e)):a.setState({results:[]})},a.add=function(e,t){a.props.add(e,t)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{className:"close-search"},"Close")),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",onChange:function(t){return e.updateQuery(t.target.value)},placeholder:"Search by title or author"}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},this.state.results.map(function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(E,{parent:"search",add:e.add,id:t.id,update:e.update,shelf:t.shelf,title:t.title,authors:t.authors,image:t.imageLinks.smallThumbnail}))}))))}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).update=function(e,t){a.props.update(e,t)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},this.props.title),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},this.props.books.map(function(t){if(e.props.currently.includes(t.id))return r.a.createElement("li",{key:t.id},r.a.createElement(E,{parent:"shelf",id:t.id,update:e.update,shelf:t.shelf,title:t.title,authors:t.authors,image:t.imageLinks.smallThumbnail}))}))))}}]),t}(n.Component),j=a(0),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],currentlyReading:[],read:[],wantToRead:[]},a.update=function(e,t){var n={},r=a.state.books,o=!0,c=!1,s=void 0;try{for(var l,i=r[Symbol.iterator]();!(o=(l=i.next()).done);o=!0){var u=l.value;u.id===e&&(n=u)}}catch(d){c=!0,s=d}finally{try{o||null==i.return||i.return()}finally{if(c)throw s}}v(n,t).then(function(e){a.setState(function(){return{currentlyReading:e.currentlyReading,wantToRead:e.wantToRead,read:e.read}})})},a.add=function(e,t){y(e).then(function(n){"wantToRead"===t?a.setState(function(e){return{wantToRead:e.wantToRead.concat([n.id]),books:e.books.concat(n)}}):"currentlyReading"===t?a.setState(function(e){return{currentlyReading:e.currentlyReading.concat([n.id]),books:e.books.concat(n)}}):"read"===t&&a.setState(function(e){return{read:e.read.concat([n.id]),books:e.books.concat(n)}}),a.update(e,t)})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(m,"/books"),{headers:b}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState({books:t});var a=!0,n=!1,r=void 0;try{for(var o,c=function(){var t=o.value;"currentlyReading"===t.shelf?e.setState(function(e){return{currentlyReading:e.currentlyReading.concat([t.id])}}):"wantToRead"===t.shelf?e.setState(function(e){return{wantToRead:e.wantToRead.concat([t.id])}}):e.setState(function(e){return{read:e.read.concat([t.id])}})},s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)c()}catch(l){n=!0,r=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(j.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,r.a.createElement(R,{update:e.update,books:e.state.books,currently:e.state.currentlyReading,title:"Currently Reading",shelf:"currentlyReading"}),r.a.createElement(R,{update:e.update,books:e.state.books,currently:e.state.wantToRead,title:"Want to Read",shelf:"wantToRead"}),r.a.createElement(R,{update:e.update,books:e.state.books,currently:e.state.read,title:"Read",shelf:"read"}))),r.a.createElement(s.b,{to:"/search"},r.a.createElement("div",{className:"open-search"},r.a.createElement("button",{type:"button"},"Add a book"))))}}),r.a.createElement(j.a,{path:"/search",render:function(){return r.a.createElement(g,{add:e.add})}}))}}]),t}(r.a.Component);a(32);c.a.render(r.a.createElement(s.a,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.8b7c1779.chunk.js.map